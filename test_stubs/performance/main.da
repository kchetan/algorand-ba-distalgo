import algorand as algo
from controller import Controller
import parameters as params

def main():

    params.lambda_block = 8
    params.lambda_step = 10


    for i in range(6,43, 3):
        for j in range(3):
            if i in range(6,11):
                params.tau_step = 5
                params.tau_proposer = 3
                params.tau_final = 5

            else if i in range(11,21):
                params.tau_step = 9
                params.tau_proposer = 6
                params.tau_final = 9

            else if i in range(20,43):
                params.tau_step = 15
                params.tau_proposer = 10
                params.tau_final = 16

            context = algo.initial_context()
            ps = new(algo.User, num=i)
            ctrl = new(Controller, (ps, params.lambda_block, context, 0.2))

            for p in ps: setup(p, (ps-{p}, ctrl, context))
            start(ps)
            start(ctrl)
            await(received(('done',), from_=ctrl))